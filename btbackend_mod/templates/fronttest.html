<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Example</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script> 
</head>
<body>
    <h1>WebSocket Example</h1>
    <div id="data-container"></div>

    <script>
        var socket = io('http://127.0.0.1:5000'); // Connect to WebSocket server
        
        // Function to fetch data from the server
        function fetchData() {
            console.log("Sending 'get_data' event to the server...");
            socket.emit('get_data');
        }

        // Event handler for successful WebSocket connection
        socket.on('connect', function() {
            console.log("WebSocket connected.");
            // Fetch data immediately after successful connection
            fetchData();
            // Set up polling to fetch data every 5 seconds
            setInterval(fetchData, 5000); // Fetch data every 5 seconds (adjust as needed)
        });

        // Event handler for receiving data from the server
        socket.on('data_response', function(data) {
            // Display the received data
            var container = document.getElementById('data-container');
            container.innerText = JSON.stringify(data);
        });
    </script>
</body>
</html>
